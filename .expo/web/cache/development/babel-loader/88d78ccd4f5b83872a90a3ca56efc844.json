{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\DELL-EDESOFT\\\\Desktop\\\\nlw\\\\aulas\\\\mobile\\\\src\\\\Page\\\\TeacherList\\\\index.tsx\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport PageHeader from \"../../Components/pageHeader\";\nimport TeacherItem from \"../../Components/TeacherItem\";\nimport { ScrollView, BorderlessButton, RectButton } from \"react-native-gesture-handler\";\nimport AsyncStorage from '@react-native-community/async-storage';\nimport api from \"../../server/api\";\nimport { Feather } from '@expo/vector-icons';\nimport styles from \"./styles\";\n\nfunction TeacherList() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isFilterVisible = _useState2[0],\n      setIsFiltersVisible = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      teachers = _useState4[0],\n      setTeachers = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      favorites = _useState6[0],\n      setFavorites = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      subject = _useState8[0],\n      setSubject = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      weekday = _useState10[0],\n      setWeekday = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      time = _useState12[0],\n      setTime = _useState12[1];\n\n  function loadFavorites() {\n    AsyncStorage.getItem('favorites').then(function (response) {\n      if (response) {\n        var favoritedTeachers = JSON.parse(response);\n        var favoritedTeachersIds = favoritedTeachers.map(function (teacher) {\n          return teacher.id;\n        });\n        setFavorites(favoritedTeachersIds);\n      }\n    });\n  }\n\n  function handleFiltersSubmit() {\n    var response;\n    return _regeneratorRuntime.async(function handleFiltersSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            loadFavorites();\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(api.get('classes', {\n              params: {\n                subject: subject,\n                weekday: weekday,\n                time: time\n              }\n            }));\n\n          case 3:\n            response = _context.sent;\n            setIsFiltersVisible(false);\n            setTeachers(response.data);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function handleFiltersVisible() {\n    setIsFiltersVisible(!isFilterVisible);\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, React.createElement(PageHeader, {\n    title: \"Proffys dispon\\xEDveis\",\n    headerRight: React.createElement(BorderlessButton, {\n      onPress: handleFiltersVisible,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, React.createElement(Feather, {\n      name: \"filter\",\n      size: 20,\n      color: \"#fff\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, isFilterVisible && React.createElement(View, {\n    style: styles.searchForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 29\n    }\n  }, React.createElement(Text, {\n    style: styles.label,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 33\n    }\n  }, \"Mat\\xE9ria\"), React.createElement(TextInput, {\n    value: subject,\n    onChangeText: function onChangeText(text) {\n      return setSubject(text);\n    },\n    placeholderTextColor: \"#c1bccc\",\n    style: styles.input,\n    placeholder: \"Qual a mat\\xE9ria?\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 37\n    }\n  }), React.createElement(View, {\n    style: styles.inputGroup,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 41\n    }\n  }, React.createElement(View, {\n    style: styles.inputBlock,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 45\n    }\n  }, React.createElement(Text, {\n    style: styles.label,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 49\n    }\n  }, \"Dia da Semana\"), React.createElement(TextInput, {\n    style: styles.input,\n    value: weekday,\n    onChangeText: function onChangeText(text) {\n      return setWeekday(text);\n    },\n    placeholderTextColor: \"#c1bccc\",\n    placeholder: \"Qual o dia?\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 53\n    }\n  })), React.createElement(View, {\n    style: styles.inputBlock,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 45\n    }\n  }, React.createElement(Text, {\n    style: styles.label,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 49\n    }\n  }, \"Hor\\xE1rio\"), React.createElement(TextInput, {\n    value: time,\n    onChangeText: function onChangeText(text) {\n      return setTime(text);\n    },\n    placeholderTextColor: \"#c1bccc\",\n    style: styles.input,\n    placeholder: \"Qual a hor\\xE1rio?\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 53\n    }\n  }))), React.createElement(RectButton, {\n    onPress: handleFiltersSubmit,\n    style: styles.submitButton,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }, React.createElement(Text, {\n    style: styles.TextSubmitButton,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 41\n    }\n  }, \"Filtrar\")))), React.createElement(ScrollView, {\n    style: styles.teacherList,\n    contentContainerStyle: {\n      paddingHorizontal: 16,\n      paddingBottom: 16\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, teachers.map(function (teacher) {\n    return React.createElement(TeacherItem, {\n      key: teacher.id,\n      teacher: teacher,\n      favorited: favorites.includes(teacher.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 29\n      }\n    });\n  })));\n}\n\nexport default TeacherList;","map":{"version":3,"sources":["C:/Users/DELL-EDESOFT/Desktop/nlw/aulas/mobile/src/Page/TeacherList/index.tsx"],"names":["React","useState","PageHeader","TeacherItem","ScrollView","BorderlessButton","RectButton","AsyncStorage","api","Feather","styles","TeacherList","isFilterVisible","setIsFiltersVisible","teachers","setTeachers","favorites","setFavorites","subject","setSubject","weekday","setWeekday","time","setTime","loadFavorites","getItem","then","response","favoritedTeachers","JSON","parse","favoritedTeachersIds","map","teacher","id","handleFiltersSubmit","get","params","data","handleFiltersVisible","container","searchForm","label","text","input","inputGroup","inputBlock","submitButton","TextSubmitButton","teacherList","paddingHorizontal","paddingBottom","includes"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { View, Text, TextInput } from 'react-native';\r\n\r\nimport PageHeader from \"../../Components/pageHeader\";\r\nimport TeacherItem, { Teacher } from \"../../Components/TeacherItem\";\r\nimport { ScrollView, BorderlessButton, RectButton } from \"react-native-gesture-handler\";\r\n\r\nimport AsyncStorage from '@react-native-community/async-storage'\r\n\r\nimport api from \"../../server/api\";\r\n\r\nimport { Feather } from '@expo/vector-icons';\r\n\r\nimport styles from './styles'\r\n\r\n\r\n\r\nfunction TeacherList() {\r\n    const [isFilterVisible, setIsFiltersVisible] = useState(false)\r\n\r\n    const [teachers, setTeachers] = useState([])//aula 3\r\n\r\n    const [favorites, setFavorites] = useState<number[]>([])\r\n\r\n    const [subject, setSubject] = useState('')\r\n    const [weekday, setWeekday] = useState('')\r\n    const [time, setTime] = useState('')\r\n\r\n     function loadFavorites() {\r\n        AsyncStorage.getItem('favorites').then(response=>{\r\n            if (response){\r\n                const favoritedTeachers = JSON.parse(response)\r\n                const favoritedTeachersIds = favoritedTeachers.map((teacher:Teacher) =>{\r\n                    return teacher.id;\r\n                })\r\n                setFavorites(favoritedTeachersIds);\r\n            }\r\n        });\r\n    }\r\n\r\n   async function handleFiltersSubmit(){\r\n    loadFavorites();\r\n\r\n        const response = await api.get('classes', {\r\n            params:{\r\n                subject,\r\n                weekday, \r\n                time,\r\n            }\r\n        }) \r\n        setIsFiltersVisible(false);\r\n\r\n        setTeachers(response.data);\r\n    }\r\n   \r\n    function handleFiltersVisible(){\r\n        setIsFiltersVisible(!isFilterVisible);\r\n    }\r\n\r\n    return(\r\n        <View style={styles.container} >\r\n            <PageHeader  \r\n            title='Proffys disponíveis' \r\n            headerRight={(\r\n                <BorderlessButton onPress={handleFiltersVisible}>\r\n                    <Feather name='filter' size={20} color='#fff'/>\r\n                </BorderlessButton>\r\n            )} >\r\n                { isFilterVisible && \r\n                        (    \r\n                            <View style={styles.searchForm}>\r\n\r\n\r\n                                <Text style={styles.label} >Matéria</Text>\r\n                                    <TextInput\r\n                                     value = {subject}\r\n                                     onChangeText={text => setSubject(text) }\r\n                                    placeholderTextColor='#c1bccc'\r\n                                    style={styles.input}\r\n                                    placeholder=\"Qual a matéria?\"\r\n                                    />\r\n                                        <View style={styles.inputGroup}>\r\n                                            <View style={styles.inputBlock} >\r\n                                                <Text style={styles.label} >Dia da Semana</Text>\r\n                                                    <TextInput\r\n                                                    style ={styles.input}\r\n                                                    value = {weekday}\r\n                                                    onChangeText={text => setWeekday(text) }\r\n                                                    placeholderTextColor='#c1bccc'\r\n                                                    placeholder=\"Qual o dia?\"\r\n                                                    />\r\n                                            </View>\r\n\r\n                                            <View style={styles.inputBlock} >\r\n                                                <Text style={styles.label} >Horário</Text>\r\n                                                    <TextInput\r\n                                                     value = {time}\r\n                                                     onChangeText={text => setTime(text) }\r\n                                                    placeholderTextColor='#c1bccc'\r\n                                                    style={styles.input}\r\n                                                    placeholder=\"Qual a horário?\"\r\n                                                    />\r\n                                            </View>\r\n                                        </View>\r\n                                <RectButton \r\n                                    onPress={handleFiltersSubmit}\r\n                                    style={styles.submitButton}\r\n                                >\r\n                                        <Text style={styles.TextSubmitButton}>Filtrar</Text>\r\n                                </RectButton>\r\n                            </View>\r\n                        )\r\n                }       \r\n            </PageHeader>\r\n\r\n        <ScrollView style={styles.teacherList} \r\n        contentContainerStyle={{\r\n            paddingHorizontal:16,\r\n            paddingBottom:16\r\n        }}>\r\n            {teachers.map((teacher: Teacher)=>{\r\n                       return(\r\n                      \r\n                            <TeacherItem \r\n                                key={teacher.id} \r\n                                teacher={teacher} \r\n                                favorited={favorites.includes(teacher.id)}\r\n                            />\r\n                            \r\n                        )\r\n                   }\r\n                )\r\n            }\r\n               \r\n        </ScrollView>\r\n\r\n            \r\n        </View>\r\n    )\r\n    \r\n}\r\n\r\nexport default TeacherList;"]},"metadata":{},"sourceType":"module"}